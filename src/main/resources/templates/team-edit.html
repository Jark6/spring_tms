<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="EN">
<head>
    <title>Редактирование команды</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>
<body>
<header th:insert="blocks/header :: header"></header>
    <div class="container mt-5 mb-5">
        <h2>Редактирование команды</h2>
        <form th:action="@{/admin/editTeam}" th:object="${editTeam}" method="post">
            <input type="hidden" th:field="*{team_id}"/>
            <div class="form-group">
                <label for="teamName">Название команды</label>
                <input type="text" class="form-control" id="teamName" name="teamName" th:field="*{team_name}" required>
            </div>
            <!-- Скрытое поле для передачи members -->
<!--            <input type="hidden" th:field="${members != null ? members : ''}"  />-->
            <label for="userIds">Выбрать членов команды</label>
            <div class="form-check" id="userIds" th:each="user : ${users}" required>
                <input class="form-check-input" type="checkbox" name="userIds" th:value="${user.user_id}" th:id="${user.user_id}"
                       th:checked="${members != null and members.contains(user)}">
                <label class="form-check-label" th:text="${user.getFullName()}">
                </label>
            </div><br>
                <button type="submit" class="btn btn-primary">Сохранить изменения</button>
            <input type="hidden" name="selectedUserIds" th:value="${selectedUserIds != null ? selectedUserIds : ''}" />
        </form>


    </div>
<!--<script>
    function updateUserIds() {
        var selectedUserIds = [];
        var checkboxes = document.querySelectorAll('input[type=checkbox][name=userIds]:checked');
        checkboxes.forEach(function(checkbox) {
            selectedUserIds.push(checkbox.value);
        });
        document.getElementById('selectedUserIds').value = selectedUserIds.join(',');
    }
</script>-->
<div th:insert="blocks/footer :: footer"></div>
</body>
</html>