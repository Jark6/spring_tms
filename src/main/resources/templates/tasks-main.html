<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="EN">
<head>
    <title>Список задач</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
</head>
<body>
<header th:insert="blocks/header :: header"></header>
<div class="container mt-5">
    <h1>Список задач</h1>
    <div th:each="el : ${tasks}" class="alert alert-secondary mt-2" th:sort="${el.task_id}">
        <h3 th:text="'T-' + ${el?.task_id}"/>
        <p th:text="${el?.short_description}"/>
        <a th:href="'/tasks/' + ${el?.task_id}" class="btn btn-outline-info">Подробнее</a>
    </div>
</div>
<!-- Подключение библиотеки toastr из CDN -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script th:inline="javascript">
    $(document).ready(function() {
        var successMessage = /*[[@{${successMessage}}]]*/ ''; // Retrieve successMessage from Thymeleaf
        console.log(successMessage);

        if (successMessage === "Задача успешно добавлена!") {
            toastr.success("Задача успешно добавлена!");
        } else if (successMessage === "Задача успешно изменена!") {
            toastr.success("Задача успешно изменена!");
        } else if (successMessage === "Задача успешно удалена!") {
            toastr.error("Задача успешно удалена!");
        }

        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": false,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": false,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
    });
</script>
<div th:insert="blocks/footer :: footer"></div>
</body>
</html>